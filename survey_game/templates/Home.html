<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–ø–∏—Å–æ–∫ –æ–ø—Ä–æ—Å–æ–≤</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/Home.css' %}">
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>–°–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤ –æ—Ç LoLkin</h1>
            <div class="user-info">
                –ü—Ä–∏–≤–µ—Ç, {{ user.username }}!
            </div>
        </div>

        <div class="page-title">–î–æ—Å—Ç—É–ø–Ω—ã–µ –æ–ø—Ä–æ—Å—ã</div>
        <div class="page-subtitle">–í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ä–æ—Å –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ</div>

        <!-- –ü–û–ò–°–ö–û–í–ê–Ø –°–¢–†–û–ö–ê -->
        <div class="search-section">
            <form method="get" action="{% url 'home' %}" class="search-form">
                <div class="search-wrapper">
                    <input
                        type="text"
                        name="q"
                        class="search-input"
                        placeholder="üîç –ü–æ–∏—Å–∫ –æ–ø—Ä–æ—Å–æ–≤..."
                        value="{{ query }}"
                        autocomplete="off"
                    >
                    <button type="submit" class="search-btn">–ù–∞–π—Ç–∏</button>
                    {% if query %}
                        <a href="{% url 'home' %}" class="clear-search">‚úï</a>
                    {% endif %}
                </div>
            </form>
        </div>

        <!-- –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ü–û–ò–°–ö–ê -->
        <div class="poll-count">
            {% if query %}
                –ù–∞–π–¥–µ–Ω–æ –æ–ø—Ä–æ—Å–æ–≤: {{ search_result_count }} –∏–∑ {{ total_polls }}
                <span class="search-query">–ø–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}"</span>
            {% else %}
                –í—Å–µ–≥–æ –æ–ø—Ä–æ—Å–æ–≤: {{ polls|length }}
            {% endif %}
        </div>

        <!-- –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ü–û–ò–°–ö–ê -->
        {% if polls %}
            <ul class="polls-list">
                {% for poll in polls %}
                    <li class="poll-item">
                        <a href="/vote/{{ poll.id }}/" class="poll-link">
                            {{ poll.name }}
                            {% if query %}
                                <!-- –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) -->
                                <span class="match-info">—Å–æ–¥–µ—Ä–∂–∏—Ç "{{ query }}"</span>
                            {% endif %}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <div class="empty-state">
                {% if query %}
                    <h3>üòï –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
                    <p>–ü–æ –∑–∞–ø—Ä–æ—Å—É "{{ query }}" –æ–ø—Ä–æ—Å–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
                    <a href="{% url 'home' %}" class="reset-search">–°–±—Ä–æ—Å–∏—Ç—å –ø–æ–∏—Å–∫</a>
                {% else %}
                    <h3>–û–ø—Ä–æ—Å—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</h3>
                    <p>–í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –æ–ø—Ä–æ—Å–æ–≤.</p>
                {% endif %}
            </div>
        {% endif %}

        <div class="bottom-actions">
            <a href="/create" class="create-poll-btn">‚ûï –°–æ–∑–¥–∞—Ç—å –æ–ø—Ä–æ—Å</a>
            <form method="post" action="{% url 'logout' %}" class="logout-form">
                {% csrf_token %}
                <button type="submit" class="logout-btn">üö™ –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã</button>
            </form>
        </div>
    </div>
</body>
</html>